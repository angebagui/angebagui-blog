var XRegExp;if(XRegExp)throw Error("can't load XRegExp twice in the same frame");!function(){function e(e,n){if(!XRegExp.isRegExp(e))throw TypeError("type RegExp expected");var r=e._xregexp;return e=XRegExp(e.source,t(e)+(n||"")),r&&(e._xregexp={source:r.source,captureNames:r.captureNames?r.captureNames.slice(0):null}),e}function t(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function n(e,t,n,r){var i,a,l,o=u.length;s=!0;try{for(;o--;)if(l=u[o],n&l.scope&&(!l.trigger||l.trigger.call(r))&&(l.pattern.lastIndex=t,a=l.pattern.exec(e),a&&a.index===t)){i={output:l.handler.call(r,a,n),match:a};break}}catch(g){throw g}finally{s=!1}return i}function r(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}XRegExp=function(t,r){var i,l,u,g,c,h=[],p=XRegExp.OUTSIDE_CLASS,d=0;if(XRegExp.isRegExp(t)){if(void 0!==r)throw TypeError("can't supply flags when constructing one RegExp from another");return e(t)}if(s)throw Error("can't call the XRegExp constructor within token definition functions");for(r=r||"",i={hasNamedCapture:!1,captureNames:[],hasFlag:function(e){return r.indexOf(e)>-1},setFlag:function(e){r+=e}};d<t.length;)l=n(t,d,p,i),l?(h.push(l.output),d+=l.match[0].length||1):(u=o.exec.call(f[p],t.slice(d)))?(h.push(u[0]),d+=u[0].length):(g=t.charAt(d),"["===g?p=XRegExp.INSIDE_CLASS:"]"===g&&(p=XRegExp.OUTSIDE_CLASS),h.push(g),d++);return c=RegExp(h.join(""),o.replace.call(r,a,"")),c._xregexp={source:t,captureNames:i.hasNamedCapture?i.captureNames:null},c},XRegExp.version="1.5.0",XRegExp.INSIDE_CLASS=1,XRegExp.OUTSIDE_CLASS=2;var i=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,a=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,l=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,s=!1,u=[],o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},g=void 0===o.exec.call(/()??/,"")[1],c=function(){var e=/^/g;return o.test.call(e,""),!e.lastIndex}(),h=function(){var e=/x/g;return o.replace.call("x",e,""),!e.lastIndex}(),p=void 0!==RegExp.prototype.sticky,f={};f[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/,f[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,XRegExp.addToken=function(t,n,r,i){u.push({pattern:e(t,"g"+(p?"y":"")),handler:n,scope:r||XRegExp.OUTSIDE_CLASS,trigger:i||null})},XRegExp.cache=function(e,t){var n=e+"/"+(t||"");return XRegExp.cache[n]||(XRegExp.cache[n]=XRegExp(e,t))},XRegExp.copyAsGlobal=function(t){return e(t,"g")},XRegExp.escape=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},XRegExp.execAt=function(t,n,r,i){n=e(n,"g"+(i&&p?"y":"")),n.lastIndex=r=r||0;var a=n.exec(t);return i?a&&a.index===r?a:null:a},XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens")}},XRegExp.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},XRegExp.iterate=function(t,n,r,i){for(var a,l=e(n,"g"),s=-1;a=l.exec(t);)r.call(i,a,++s,t,l),l.lastIndex===a.index&&l.lastIndex++;n.global&&(n.lastIndex=0)},XRegExp.matchChain=function(t,n){return function r(t,i){var a,l=n[i].regex?n[i]:{regex:n[i]},s=e(l.regex,"g"),u=[];for(a=0;a<t.length;a++)XRegExp.iterate(t[a],s,function(e){u.push(l.backref?e[l.backref]||"":e[0])});return i!==n.length-1&&u.length?r(u,i+1):u}([t],0)},RegExp.prototype.apply=function(e,t){return this.exec(t[0])},RegExp.prototype.call=function(e,t){return this.exec(t)},RegExp.prototype.exec=function(e){var n,i,a=o.exec.apply(this,arguments);if(a){if(!g&&a.length>1&&r(a,"")>-1&&(i=RegExp(this.source,o.replace.call(t(this),"g","")),o.replace.call(e.toString().slice(a.index),i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var l=1;l<a.length;l++)n=this._xregexp.captureNames[l-1],n&&(a[n]=a[l]);!c&&this.global&&!a[0].length&&this.lastIndex>a.index&&this.lastIndex--}return a},c||(RegExp.prototype.test=function(e){var t=o.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}),String.prototype.match=function(e){if(XRegExp.isRegExp(e)||(e=RegExp(e)),e.global){var t=o.match.apply(this,arguments);return e.lastIndex=0,t}return e.exec(this)},String.prototype.replace=function(e,t){var n,a,l,s=XRegExp.isRegExp(e);return s&&"string"==typeof t.valueOf()&&-1===t.indexOf("${")&&h?o.replace.apply(this,arguments):(s?e._xregexp&&(n=e._xregexp.captureNames):e+="","function"==typeof t?a=o.replace.call(this,e,function(){if(n){arguments[0]=new String(arguments[0]);for(var r=0;r<n.length;r++)n[r]&&(arguments[0][n[r]]=arguments[r+1])}return s&&e.global&&(e.lastIndex=arguments[arguments.length-2]+arguments[0].length),t.apply(null,arguments)}):(l=this+"",a=o.replace.call(l,e,function(){var e=arguments;return o.replace.call(t,i,function(t,i,a){if(!i){var l=+a;return l<=e.length-3?e[l]:(l=n?r(n,a):-1,l>-1?e[l+1]:t)}switch(i){case"$":return"$";case"&":return e[0];case"`":return e[e.length-1].slice(0,e[e.length-2]);case"'":return e[e.length-1].slice(e[e.length-2]+e[0].length);default:var s="";if(i=+i,!i)return t;for(;i>e.length-3;)s=String.prototype.slice.call(i,-1)+s,i=Math.floor(i/10);return(i?e[i]||"":"$")+s}})})),s&&e.global&&(e.lastIndex=0),a)},String.prototype.split=function(e,t){if(!XRegExp.isRegExp(e))return o.split.apply(this,arguments);var n,r,i=this+"",a=[],l=0;if(void 0===t||0>+t)t=1/0;else if(t=Math.floor(+t),!t)return[];for(e=XRegExp.copyAsGlobal(e);(n=e.exec(i))&&!(e.lastIndex>l&&(a.push(i.slice(l,n.index)),n.length>1&&n.index<i.length&&Array.prototype.push.apply(a,n.slice(1)),r=n[0].length,l=e.lastIndex,a.length>=t));)e.lastIndex===n.index&&e.lastIndex++;return l===i.length?(!o.test.call(e,"")||r)&&a.push(""):a.push(i.slice(l)),a.length>t?a.slice(0,t):a},XRegExp.addToken(/\(\?#[^)]*\)/,function(e){return o.test.call(l,e.input.slice(e.index+e[0].length))?"":"(?:)"}),XRegExp.addToken(/\((?!\?)/,function(){return this.captureNames.push(null),"("}),XRegExp.addToken(/\(\?<([$\w]+)>/,function(e){return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),XRegExp.addToken(/\\k<([\w$]+)>/,function(e){var t=r(this.captureNames,e[1]);return t>-1?"\\"+(t+1)+(isNaN(e.input.charAt(e.index+e[0].length))?"":"(?:)"):e[0]}),XRegExp.addToken(/\[\^?]/,function(e){return"[]"===e[0]?"\\b\\B":"[\\s\\S]"}),XRegExp.addToken(/^\(\?([imsx]+)\)/,function(e){return this.setFlag(e[1]),""}),XRegExp.addToken(/(?:\s+|#.*)+/,function(e){return o.test.call(l,e.input.slice(e.index+e[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")}),XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})}(),"undefined"!=typeof exports?exports.XRegExp=XRegExp:null;